Metadata-Version: 2.4
Name: va-lidar-context
Version: 0.1.0
Summary: CLI to build context building meshes from Virginia LiDAR and building footprints.
Author: Hugo Fenaux
License: MIT
Requires-Python: >=3.11
Description-Content-Type: text/markdown
Requires-Dist: requests>=2.31
Requires-Dist: numpy>=1.26
Requires-Dist: shapely>=2.0
Requires-Dist: pyproj>=3.6
Requires-Dist: rasterio>=1.3
Requires-Dist: trimesh>=4.0
Requires-Dist: mapbox-earcut>=1.0.1

# va-lidar-context

CLI to build context building meshes from Virginia LiDAR and building footprints.

## Requirements
- Python 3.11+
- System deps: PDAL, GDAL/GEOS (for rasterio/geopandas stack)
- Python deps include `mapbox-earcut` for polygon triangulation (required for extrusion).

## Usage (planned)
```
va-lidar-context build S13_4899_20 --out ./out
```

Outputs include:
- `buildings.obj`
- `terrain.obj` (DTM-based terrain mesh)

To reduce holes in terrain (and improve building base elevations), enable DTM filling:
```
va-lidar-context build S13_4899_20 --out ./out --fill-dtm
```
Optional tuning:
- `--fill-max-dist` (pixels, default 10)
- `--fill-smoothing` (iterations, default 0)
 - `--fill-hard` (force remaining NoData to a flat fill)

To override all building heights with a random range (in output units):
```
va-lidar-context build S13_4899_20 --out ./out --random-heights 15 40
```
Optional: `--random-seed 123`

To texture terrain from USGS NAIP (outputs `terrain.png` + `terrain.mtl`):
```
va-lidar-context build S13_4899_20 --out ./out --naip-texture
```
Optional tuning:
- `--naip-pixel-size` (meters, default 1.0)
- `--naip-max-size` (pixels, default 4000)
- `--naip-flip-u` / `--naip-flip-v` (flip UVs if imagery appears mirrored)

To add lightweight tree blobs from canopy (classification 1):
```
va-lidar-context build S13_4899_20 --out ./out --trees
```
Optional tuning:
- `--trees-resolution` (raster resolution, default 2.0)
- `--trees-sample` (stride, default 2)
- `--trees-min-height` (output units, default 10)
- `--trees-max-height` (output units, optional)
- `--trees-radius` (output units, default 6)
